services:
  api:
    build:
      context: .
      dockerfile: Dockerfile.api
    ports: ["8000:8000"]
    volumes:
      - ./kb:/app/kb
      - ./artifacts:/app/artifacts
      - ./exports:/app/exports
  ui:
    build:
      context: .
    dockerfile: Dockerfile.ui
    environment:
      - GRADIO_SERVER_NAME=0.0.0.0
      - GRADIO_SERVER_PORT=7860
    ports: ["7860:7860"]
    depends_on: [api]
